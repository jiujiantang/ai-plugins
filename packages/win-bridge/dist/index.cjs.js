"use strict";var g=Object.defineProperty;var a=(o,e,t)=>e in o?g(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var s=(o,e,t)=>(a(o,typeof e!="symbol"?e+"":e,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const d=require("vue");class c{constructor(){s(this,"debug");s(this,"logContainer");this.debug=!1,this.logContainer=null}createDebugPanel(e){const t=document.createElement("div"),r=document.querySelector(e);r?(r.appendChild(t),this.logContainer=t):console.warn(`Selector "${e}" not found.`)}debugPanel(e){this.debug=!0,e&&this.createDebugPanel(e)}log(e){if(this.logContainer){const t=document.createElement("div");t.innerText=`${new Date().toISOString()} - ${e}`,this.logContainer.appendChild(t),this.logContainer.scrollTop=this.logContainer.scrollHeight}}callExternalMethod(e,...t){this.log(`Calling method: ${e} with args: ${JSON.stringify(t)}`);const r=window.external;try{if(typeof window<"u"&&r&&typeof r[e]=="function")try{const n=r[e](...t);return this.log(`Method ${e} returned: ${n}`),n}catch(n){this.log(`Error in method: ${e}, Error: ${n instanceof Error?n.message:n}`)}else this.log(`Method ${e} not found`)}catch(n){this.log(n)}return null}registerClientMethod(e,t){typeof window<"u"&&(window[e]=(...r)=>{this.log(`Client method called: ${e} with args: ${JSON.stringify(r)}`);try{t(...r)}catch(n){this.log(`Error in callback for ${e}, Error: ${n instanceof Error?n.message:n}`)}})}}function u(){const o=new c,e=i=>{o.debugPanel(i)},t=i=>{o.log(i)},r=(i,...l)=>{o.callExternalMethod(i,...l)},n=(i,l)=>{o.registerClientMethod(i,l)};d.provide("windowBridge",{debugPanel:e,logger:t,callExternalMethod:r,registerClientMethod:n})}function h(){return d.inject("windowBridge")}exports.useWindowBridge=h;exports.useWindowBridgeProvider=u;
